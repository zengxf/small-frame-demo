plugins {
//    id "io.freefair.lombok" version "6.3.0" apply false
}

allprojects {
    apply plugin: "java"
}

subprojects {
    group = "cn.zxf"
    version = "1.0.0"
    sourceCompatibility = 17

    repositories {
        maven { url "https://maven.aliyun.com/nexus/content/groups/public/" }
        mavenCentral()
    }
    ext {
        vSpringBoot = "2.7.3"
        vNetty = "4.1.82.Final"
        vProtobuf = "3.21.5"

        vLog4j2 = "2.18.0"
        vSlf4j = "1.7.36"        // vSlf4j = "2.0.0" // Log4j2 还没适配
        vLombok = "1.18.24"

        vJunit5 = "5.9.0"
    }
    dependencies {
        // Netty
        implementation group: "io.netty", name: "netty-all", version: "${vNetty}"
        // ProtoBuf
        implementation group: "com.google.protobuf", name: "protobuf-java", version: "${vProtobuf}"
        // Lombok
        compileOnly group: "org.projectlombok", name: "lombok", version: "${vLombok}"
        annotationProcessor group: "org.projectlombok", name: "lombok", version: "${vLombok}"
        testCompileOnly group: "org.projectlombok", name: "lombok", version: "${vLombok}"
        testAnnotationProcessor group: "org.projectlombok", name: "lombok", version: "${vLombok}"
        // Test
        testImplementation group: "org.junit.jupiter", name: "junit-jupiter-api", version: "${vJunit5}"
        testImplementation group: "org.junit.jupiter", name: "junit-jupiter-engine"
        testImplementation group: "org.junit.vintage", name: "junit-vintage-engine" // 兼容 JUnit 4
    }

    // 启用 JUnit 5
    test { useJUnitPlatform() }
}